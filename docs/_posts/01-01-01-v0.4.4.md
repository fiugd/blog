---

category: present
title: "Version 0.4.4"
description: "work in progress"
image: https://user-images.githubusercontent.com/1816471/115645234-02556880-a2ee-11eb-9e7d-e5c434632cf2.png
video:

date: 2021-08-23
started: 2021-08-23
released:
updated:


---


continue the work locking in "quality" started in (but not the main focus of) v0.4.3.  The main focus should be on removing operations which incur a big performance hit, like cloning all files in repository versus reading them JIT.

<!-- more -->

### GOALS (git):
- [ ] clone a repo that doesn't already exist
- [ ] pull/fetch a repo that already exists

- [ ] load a repo that already exists
- [ ] list all repos that are cloned
- [ ] list all repos from an owner
- [ ] list all branches for a repo

- [ ] do everything this does (lol) https://cli.github.com/

### TODO:
- [ ] service worker should:
	- [X] ignore contents of .git folder
	- use .git/config as below(except with global scope) for credentials

- [ ] git config support for the following, mind the "global"
	> git config --global user.name "fname lname"
	> git config --global user.email "example@gmail.com"
	> git config --global user.password "secret"
	- [ ] because repo ("local") is not available before git clone

- [X] when git commit fails should not blow away changes

- [ ] when repo is "cloned" / "pulled" should not blow away .git folder
- [ ] when repo is "fetched" should not blow away current changes


### OTHER:
https://github.com/nodeca/js-yaml
https://github.com/eemeli/yaml
https://codemirror.net/mode/yaml/index.html

codemirror ini files (like .git/config and .editorconfig)
https://codemirror.net/mode/properties/index.html


### THEME:
  - PERFORMANCE
  - QUALITY
  - FINE-TOOTHED COMB

### SUB-THEMES:
  - git++
  - SW++
  - editor++
  - plugins

### tasks:
  - [X] remove files from service manifest that don't need to be there
  - [X] move templates to their own repo
  - [ ] keep repo files on github until needed
  - [ ] refactor modules into their own folders, remove "shared" folder (or drastically reduce size)

  - [ ] editor horizontal scroll
  - [ ] merge editor changes with git changed(?)
  - [ ] feed exclusively on update event
    - editor tabs: order, open, changed, new, pinned
    - tree: service name, selected, changed, new, open, scroll?
    - editor: selected, history, scroll, etc
    - terminal: current dir (if not in session), service name

---

### BE SMART
  - [ ] DO NOT: download all github files when cloning repo
    - balance this against offline usage
  - [ ] DO NOT: download all files in service manifest on first load
    - balance this against offline usage
    - especially do not download files needed for templates
  - [ ] DO: load editor modes as needed, cache and cleanup
  - [ ] DO: clean up editor state as needed
    - when undo file change reverts to unchanged state, this file is touched but no longer changed
    - when a touched file is closed, it is no longer touched
  - [ ] DO: clean up orphaned files
    - files that are not opened and not in tree should be removed from store
  - [X] DO NOT: save files to wrong location with empty contents (BUG SOMEWHERE CAUSES THIS)
  - [ ] DO NOT: keep state in many different places
    - which files are open: tracked in SW and tabs
    - which files are changed: tracked in SW and tabs
    - editor changes and file changes in different stores

### IF IT IS VISIBLE, IT WORKS WELL
  - [ ] settings: should show status of pulling/cloning
  - [ ] search: chokes sometimes (use GH search api?)
  - [ ] tabs: still weird issues / dancing
  - [ ] tree: parent folder not indicating changed child

### REMOVE DEAD CODE
  - [ ] terminal module
    - cleanup following rewrite/shift in mindset
    - includes removing old preview code
  - [ ] editor
    - load doc should be handled strictly by plugin
    - state should come from outside module
  - [ ] editor tabs
    - shift to rely strongly on SW state
  - [ ] tree / explorer
    - anything left from previous iteration?
  - [ ] delay occurs before editor loads sometimes
    - issue seems to occur because of file store get
  - [ ] copy is hooked up in tree
  - [ ] tree(?) fires multiple events
    - when dragging from one folder to another

---

write a custom CM mode that works by wrapping another syntax highlighter:
http://www.java2s.com/example/javascript/codemirror/codemirror-custom-mode-apply-styles-on-keywords.html

(or dynamically loads any given mode?)

